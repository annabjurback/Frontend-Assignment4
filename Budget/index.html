<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <!-- <link rel="icon" href="/favicon.ico"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Yatra+One" rel="stylesheet" type="text/css" media="all" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <title>Budget app</title>
  </head>

  <body>
    <main id="app">
      <h1>My expenses</h1>
      <form @submit.prevent="addExpense();">
        <label>Enter expense: <input type="text" v-model="expense" required></label>
        <label>Enter amount: <input type="number" v-model="amount" required></label>
        <label>Enter date: <input type="date" v-model="date" required></label>
        <label>Select category:
          <select v-model="category" required>
            <option v-for="type in expenseTypes" :value="type.toLowerCase()">{{type}}</option>
          </select>
        </label>
        <button type="submit">Add expense</button>
      </form>

      <div>
        <h2>History</h2>
        <ul>
          <li v-for="(expense, index) in filterExpenses()" :class="{ expense: !expense.edit }">
            <template v-if="!expense.edit" >
              <!-- Set proper html elements here -->
              <span class="expense-name">{{capitalize(expense.expense)}}</span> <span class="expense-amount">{{expense.amount}} kr</span> <span class="expense-category"> {{capitalize(expense.category)}}</span> <span class="expense-date"> {{expense.date}}</span>
              
              <button @click="deleteExpense(index);" class="delete-button">Delete expense</button>
              <button @click="expense.edit = !expense.edit" class="edit-button">Edit expense</button>
            </template>

            <template v-if="expense.edit">
              <form @submit.prevent="expense.edit = !expense.edit" class="edit-form">
                <label class="expense-label">Expense: <input type="text" v-model="expense.expense" required></label>
                <label class="amount-label">Amount: <input type="number" v-model="expense.amount" required></label>
                <label class="date-label">Date: <input type="date" v-model="expense.date" required></label>
                <label class="category-label">Category:
                  <select v-model="expense.category">
                    <option v-for="type in expenseTypes" :value="type.toLowerCase()">
                      {{type}}
                    </option>
                  </select>
                </label>
                <button type="submit" class="save-button">Save expense</button>
              </form>
            </template>
          </li>
        </ul>
      </div>
      <footer>
        <form @submit.prevent="applyFilter">
          <label>
            Category:
            <select v-model="filterSelect">
              <option value="all">All</option>
              <option v-for="type in expenseTypes" :value="type.toLowerCase()">
                {{type}}      
              </option>
            </select>
          </label>
          <!-- cost slider start -->
          <label>
            Minimum cost: {{minimumAmountSelect}} kr
            <input type="range" name="filter" min="0" :max="maxAmountForSliders" v-model="minimumAmountSelect" @change="setMaximumSliderValue">
          </label>
          <label>
            Maximum cost: {{maximumAmountSelect}} kr
            <input type="range" name="filter" min="0" :max="maxAmountForSliders" v-model="maximumAmountSelect" @change="setMinimumSliderValue">
          </label>
          <!-- cost slider end -->
          <label>
            Month:
            <input type="month" v-model="selectedMonth" name="filter">
          </label>
          <button type="submit">Filter</button>
        </form>
        <button @click="resetFilter">Clear Filters</button>
        <p>max amount: {{setMaxAmount()}}{{maxAmountForSliders}} <br>
        </p>
      </footer>
    </main>
    <script type="module" src="/src/main.ts"></script>
  </body>

</html>