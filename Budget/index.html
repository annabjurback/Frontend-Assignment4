<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget app</title>
  </head>

  <body>
    <main id="app">
      <h1>My expenses</h1>
      <form @submit.prevent="addExpense">
        <label>Enter expense <input type="text" v-model="expense"></label>
        <label>Enter amount <input type="number" v-model="amount"></label>
        <label>Enter date <input type="date" v-model="date"></label>
        <label>Select category
          <select v-model="category">
            <option v-for="type in expenseTypes" :value="type.toLowerCase()">{{type}}</option>
          </select>
        </label>
        <button type="submit">Add expense</button>
      </form>

      <div>
        <h2>History</h2>
        <ul>
          <li v-for="(expense, index) in filterExpenses()">
            <template v-if="!expense.edit">
              Name: {{expense.expense}}, cost: {{expense.amount}}, category: {{expense.category}} on date
              {{expense.date}}
              <button @click="deleteExpense(index)">Delete expense</button>
              <button @click="expense.edit = !expense.edit">Edit expense</button>
            </template>

            <template v-if="expense.edit">
              <form>
                <label>Expense <input type="text" v-model.lazy="expense.expense"></label>
                <label>Amount <input type="number" v-model.lazy="expense.amount"></label>
                <label>Date <input type="date" v-model.lazy="expense.date"></label>
                <label>Category
                  <select v-model.lazy="expense.category">
                    <option v-for="type in expenseTypes" :value="type.toLowerCase()">{{type}}</option>
                  </select>
                </label>
                <button type="submit" @click="expense.edit = !expense.edit">Save expense</button>
              </form>
            </template>
          </li>
        </ul>
      </div>
      <footer>
        <form @submit.prevent="filterExpenses">
          <label>
            Category:
            <select v-model.lazy="filterOptions.category">
              <option value="all">All</option>
              <option v-for="type in expenseTypes" :value="type.toLowerCase()">
                {{type}}      
              </option>
            </select>
          </label>
          <label>
            Price:
            <input type="radio" name="filter">
          </label>
          <label>
            Date:
            <input type="radio" name="filter">
          </label>
          <button type="submit">Filter</button>
        </form>

      </footer>
    </main>
    <script type="module" src="/src/main.ts"></script>
  </body>

</html>