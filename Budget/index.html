<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <!-- <link rel="icon" href="/favicon.ico"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget app</title>
  </head>

  <body>
    <main id="app">
      <h1>My expenses</h1>
      <form @submit.prevent="addExpense();">
        <label>Enter expense <input type="text" v-model="expense" required></label>
        <label>Enter amount <input type="number" v-model="amount" required></label>
        <label>Enter date <input type="date" v-model="date" required></label>
        <label>Select category
          <select v-model="category" required>
            <option v-for="type in expenseTypes" :value="type.toLowerCase()">{{type}}</option>
          </select>
        </label>
        <button type="submit">Add expense</button>
      </form>

      <div>
        <h2>History</h2>
        <ul>
          <li v-for="(expense, index) in filterExpenses()">
            <template v-if="!expense.edit">
              <!-- Set proper html elements here -->
              Name: {{expense.expense}}, cost: {{expense.amount}}, category: {{expense.category}} on date
              {{expense.date}}
              <button @click="deleteExpense(index);">Delete expense</button>
              <button @click="expense.edit = !expense.edit">Edit expense</button>
            </template>

            <template v-if="expense.edit">
              <form @submit.prevent="expense.edit = !expense.edit">
                <label>Expense <input type="text" v-model="expense.expense" required></label>
                <label>Amount <input type="number" v-model="expense.amount" required></label>
                <label>Date <input type="date" v-model="expense.date" required></label>
                <label>Category
                  <select v-model="expense.category">
                    <option v-for="type in expenseTypes" :value="type.toLowerCase()">
                      {{type}}
                    </option>
                  </select>
                </label>
                <button type="submit">Save expense</button>
              </form>
            </template>
          </li>
        </ul>
      </div>
      <footer>
        <form @submit.prevent="applyFilter">
          <label>
            Category:
            <select v-model="filterSelect">
              <option value="all">All</option>
              <option v-for="type in expenseTypes" :value="type.toLowerCase()">
                {{type}}      
              </option>
            </select>
          </label>
          <!-- cost slider start -->
          <label>
            Minimum cost: {{filterOptions.minimumAmount}} kr
            <input type="range" name="filter" min="0" max="9999999" v-model="filterOptions.minimumAmount">
          </label>
          <label>
            Maximum cost: {{filterOptions.maximumAmount}} kr
            <input type="range" name="filter" min="0" max="9999999" v-model="filterOptions.maximumAmount">
          </label>
          <!-- cost slider end -->
          <label>
            Month:
            <input type="month" v-model="selectedMonth" name="filter">
          </label>
          <button type="submit">Filter</button>
        </form>
        <button @click="resetFilter">Clear Filters</button>
        <p>max amount: {{maxAmount}}</p>
      </footer>
    </main>
    <script type="module" src="/src/main.ts"></script>
  </body>

</html>